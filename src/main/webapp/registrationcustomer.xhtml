<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">

<ui:composition template="template/template.xhtml">
	<ui:define name="content">
		<h2>#{label.usernew}</h2>
		<p:spacer height="50" />
		<p:messages id="messages" closable="true" />
		<h:form id="form">
			<p:growl id="growl" for="growl" showDetail="true" escape="false"
				life="6000" />
			<h:panelGrid columns="4">
				<p:outputLabel for="firstname" id="firstnameLabel"
					value="#{label.firstname}" />
				<p:spacer />
				<p:inputText id="firstname"
					value="#{backingRegistrationCustomer.firstName}" required="true"
					requiredMessage="#{error.mandatory}"
					validatorMessage="#{error.length2}">
					<f:validateLength minimum="2" />
					<p:ajax event="blur" update="firstnameMessage" />
				</p:inputText>
				<p:message id="firstnameMessage" for="firstname" display="text" />

				<p:outputLabel for="lastname" id="lastnameLabel"
					value="#{label.lastname}" />
				<p:spacer />
				<p:inputText id="lastname"
					value="#{backingRegistrationCustomer.lastName}" required="true"
					requiredMessage="#{error.mandatory}"
					validatorMessage="#{error.length2}">
					<f:validateLength minimum="2" />
					<p:ajax event="blur" update="lastnameMessage" />
				</p:inputText>
				<p:message id="lastnameMessage" for="lastname" display="text" />

				<p:outputLabel for="username" id="usernameLabel"
					value="#{label.username}" />
				<p:tooltip id="usertooltip" for="username"
					value="#{label.usernametooltip}" />
				<p:inputText id="username"
					value="#{backingRegistrationCustomer.userName}" required="true"
					requiredMessage="#{error.mandatory}">
					<f:validator binding="#{validatorUsername}" />
					<p:ajax event="blur" update="usernameMessage" />
				</p:inputText>
				<p:message id="usernameMessage" for="username" display="text" />

				<p:outputLabel for="email" id="emailLabel" value="#{label.email}" />
				<p:spacer />
				<p:inputText id="email" value="#{backingRegistrationCustomer.email}"
					required="true" requiredMessage="#{error.mandatory}">
					<f:validator binding="#{validatorEmail}" />
					<p:ajax event="blur" execute="email" update="emailMessage" />
				</p:inputText>
				<p:message id="emailMessage" for="email" display="text" />

				<p:outputLabel for="password1" id="password1Label"
					value="#{label.password}" />
				<p:commandLink id="help" title="#{message.passwordtitle}"
					process="@this"
					action="#{backingRegistrationCustomer.passwordTooltip}" update="growl">
					<i class="fa fa-info-circle"></i>
				</p:commandLink>
				<p:password id="password1"
					value="#{backingRegistrationCustomer.password}" feedback="true"
					binding="#{parameter}" required="true"
					requiredMessage="#{error.mandatory}"
					promptLabel="#{label.passwordprompt}" weakLabel="#{label.weak}"
					goodLabel="#{label.good}" strongLabel="#{label.strong}">
					<p:ajax event="blur" execute="password1 password2"
						update="password1Message password2Message" />
				</p:password>
				<p:message id="password1Message" for="password1" display="text" />

				<p:outputLabel for="password2" id="password2Label"
					value="#{label.password2}" />
				<p:commandLink id="help2" title="#{message.passwordtitle}"
					process="@this"
					action="#{backingRegistrationCustomer.passwordTooltip}" update="growl">
					<i class="fa fa-info-circle"></i>
				</p:commandLink>
				<p:password id="password2"
					value="#{backingRegistrationCustomer.password}" feedback="true"
					required="true" requiredMessage="#{error.mandatory}"
					promptLabel="#{label.passwordprompt}" weakLabel="#{label.weak}"
					goodLabel="#{label.good}" strongLabel="#{label.strong}">
					<f:attribute name="parameter" value="#{parameter}" />
					<f:validator binding="#{validatorPassword}" />
					<p:ajax event="blur" execute="password1 password2"
						update="password1Message password2Message" />
				</p:password>
				<h:panelGroup>
					<o:validateEqual id="equal" components="password1 password2"
						message="#{error.passwordsdifferent}" showMessageFor="password1" />
					<p:message id="password2Message" for="password2" display="text" />
				</h:panelGroup>

				<p:outputLabel for="street" id="streetLabel" value="#{label.street}" />
				<p:spacer />
				<p:inputText id="street"
					value="#{backingRegistrationCustomer.address.street}" required="true"
					requiredMessage="#{error.mandatory}"
					validatorMessage="#{error.length2}">
					<f:validateLength minimum="2" />
					<p:ajax event="blur" update="streetMessage" />
				</p:inputText>
				<p:message id="streetMessage" for="street" display="text" />

				<p:outputLabel for="complement" id="complementLabel"
					value="#{label.complement}" />
				<p:spacer />
				<p:inputText id="complement"
					value="#{backingRegistrationCustomer.address.complement}" />
				<p:message id="complementMessage" for="complement" display="text" />

				<p:outputLabel for="postcode" id="postcodeLabel"
					value="#{label.postcode}" />
				<p:spacer />
				<p:inputText id="postcode"
					value="#{backingRegistrationCustomer.address.postCode}"
					required="true" requiredMessage="#{error.mandatory}"
					validatorMessage="#{error.length2}">
					<f:validateLength minimum="2" />
					<p:ajax event="blur" update="postcodeMessage" />
				</p:inputText>
				<p:message id="postcodeMessage" for="postcode" display="text" />

				<p:outputLabel for="city" id="cityLabel" value="#{label.city}" />
				<p:spacer />
				<p:inputText id="city"
					value="#{backingRegistrationCustomer.address.city}" required="true"
					requiredMessage="#{error.mandatory}"
					validatorMessage="#{error.length2}">
					<f:validateLength minimum="2" />
					<p:ajax event="blur" update="cityMessage" />
				</p:inputText>
				<p:message id="cityMessage" for="city" display="text" />

				<p:outputLabel for="country" id="countryLabel"
					value="#{label.country}" />
				<p:spacer />
				<p:inputText id="country"
					value="#{backingRegistrationCustomer.address.country}" required="true"
					requiredMessage="#{error.mandatory}"
					validatorMessage="#{error.length2}">
					<f:validateLength minimum="2" />
					<p:ajax event="blur" update="countryMessage" />
				</p:inputText>
				<p:message id="countryMessage" for="country" display="text" />

				<p:outputLabel for="birthdate" id="birthdateLabel"
					value="#{label.birthdate}" />
				<p:spacer />
				<p:calendar id="birthdate"
					value="#{backingRegistrationCustomer.birthDate}" navigator="true"
					pattern="dd/MM/yyyy" converter="localDateConverter"
					yearRange="#{backingRegistrationCustomer.generateYearRange()}"
					effect="slide" required="true" requiredMessage="#{error.mandatory}">
					<p:ajax event="dateSelect" update="birthdateMessage" />
					<p:ajax event="blur" update="birthdateMessage" />
				</p:calendar>
				<p:message id="birthdateMessage" for="birthdate" display="text" />

			</h:panelGrid>

			<p:spacer height="100" />
			<p:commandButton id="create" value="#{label.save}" update="form"
				action="#{backingRegistrationCustomer.create}" icon="ui-icon-check" />
			<p:spacer width="20" />
			<p:commandButton id="reset" value="#{label.reset}" update="form"
				process="@this" icon="ui-icon-refresh">
				<p:resetInput target="@form" />
			</p:commandButton>

		</h:form>
		<p:spacer height="50" />
	</ui:define>
</ui:composition>
</html>